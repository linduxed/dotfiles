#!/bin/sh

# D-bus
if which dbus-launch >/dev/null && test -z "$DBUS_SESSION_BUS_ADDRESS"; then
	eval `dbus-launch --sh-syntax --exit-with-session`
fi

# Set layouts and fix for Xorg's disabling of CAB.
# Layout switching with ScrollLock.
setxkbmap -layout "us,us,us" -variant "colemak,altgr-intl," -option grp:sclk_toggle,terminate:ctrl_alt_bksp &

# Enables repeat for the CapsLock button (Colemak Backspace).
xset r 66 &

# Xdefaults gets loaded.
xrdb -load ~/.Xdefaults &

# Synchronize X clipboard and X selection.
autocutsel -fork &
autocutsel -selection PRIMARY -fork &

# Autostart
# kbdd &
wicd-gtk -t &
gnome-keyring-daemon &
# thunderbird &
# firefox &
xscreensaver -no-splash &
start-pulseaudio-x11 &
dropboxd &
wmname LG3D &
batti &
kupfer &
/usr/lib/gnome-settings-daemon/gnome-settings-daemon &
 
# UIM related
export GTK_IM_MODULE='uim'
export QT_IM_MODULE='uim'
uim-xim &
export XMODIFIERS=@im='uim'
uim-toolbar-gtk-systray &

exec dbus-launch awesome
# exec gnome-session
